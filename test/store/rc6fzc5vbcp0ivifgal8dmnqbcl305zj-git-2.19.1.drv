Derive([("gitweb","/home/matto/projects/haskell/store-graph/test/store/pm2a6wfaqm73qv5s9g46i45v2824rw15-git-2.19.1-gitweb","",""),("out","/home/matto/projects/haskell/store-graph/test/store/pkwkbwa7vqkck2lxjh74mkrd0jhlcpn1-git-2.19.1","","")],[("/home/matto/projects/haskell/store-graph/test/store/1sj4al251lw9bnn1n2ickdqhdgnkxj4n-openssh-7.9p1.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/4gp4n9hxy7ddrx2gaj6fw05a0ad2hxqv-zlib-1.2.11.drv",["dev"]),("/home/matto/projects/haskell/store-graph/test/store/8wimiy5vjh0ij0xzm0fs5jjzqf2hffza-cpio-2.12.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/ahazh05hqbhwavrzv65nszk893v0r7fc-coreutils-8.30.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/cl53cjx596hm4ij4kmix076bj5xaalz3-expat-2.2.6.drv",["dev"]),("/home/matto/projects/haskell/store-graph/test/store/d0hr6hp34w42yyq32b59dwvp41svywls-gnugrep-3.1.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/dkgwa8iif13df3q70q1zky9nnhic2497-perl5.28.0-libwww-perl-6.35.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/gz59zjlj8rl2vsyx8gb85id4anz4wq9q-gettext-0.19.8.1.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/ij9m5bczj4djxla95768dj8d3vbsbqvm-perl5.28.0-TermReadKey-2.37.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/jhsagf261h152zx3dn5daxzm4xkyxag3-gnused-4.5.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/jz07d5c6kacm6c3pxkaz67iclfxa1i22-openssl-1.0.2p.drv",["dev"]),("/home/matto/projects/haskell/store-graph/test/store/kl3ickyaldd2w09qrph8qgd0iria0vlz-perl5.28.0-URI-1.74.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/l3d6jgkhqr5si07px6b61dkxvwx3kmvs-bash-4.4-p23.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/mc6z28sdirnplwi2gfx27g71qlc7jh2i-hook.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/mdnpxdrkmc1174mdakx0vswznn0swbjm-perl-5.28.0.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/pdyfilz5ggnfg4kfsach7h2x9y2i1dgf-curl-7.61.1.drv",["dev"]),("/home/matto/projects/haskell/store-graph/test/store/primdh43sl2b1s16pn6fl8rb3xqh8k1s-glibc-iconv-2.27.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/rf29x2brd9hmrmhy60sfzc5pr65rb79b-git-2.19.1.tar.xz.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/scsj72rdsvjaffdvvkrnb6cn0bbcc2ym-stdenv-linux.drv",["out"]),("/home/matto/projects/haskell/store-graph/test/store/whjgj080yaghhqlfjhwvfv86i7hpszp7-gawk-4.2.1.drv",["out"])],["/home/matto/projects/haskell/store-graph/test/store/afvl60vdbmagbj99lffif159gwbs157n-installCheck-path.patch","/home/matto/projects/haskell/store-graph/test/store/dwzh5nhf20ywxrs315md7rxr0in4hpqy-ssh-path.patch","/home/matto/projects/haskell/store-graph/test/store/khl5mchjvragzhn5d2qlw72cn8kgrmrj-default-builder.sh","/home/matto/projects/haskell/store-graph/test/store/lj0awfz89djbfhqm4byjw8ilfwcm7399-docbook2texi.patch","/home/matto/projects/haskell/store-graph/test/store/sm3dzz4wcsqm47k2qkl68bijmc6djf7h-git-sh-i18n.patch","/home/matto/projects/haskell/store-graph/test/store/ysl9wj7paap3zxg6c42alb6191gqwl4k-git-send-email-honor-PATH.patch"],"x86_64-linux","/home/matto/projects/haskell/store-graph/test/store/x9ql37gvvykqzxxsfgk1kqhm455p26b1-bash-4.4-p23/bin/bash",["-e","/home/matto/projects/haskell/store-graph/test/store/khl5mchjvragzhn5d2qlw72cn8kgrmrj-default-builder.sh"],[("NIX_HARDENING_ENABLE","fortify stackprotector pic strictoverflow relro bindnow"),("NIX_LDFLAGS","-lgcc_s"),("buildInputs","/home/matto/projects/haskell/store-graph/test/store/22gi6csrs9clnpc3c0bvyfb2d6g2nqk8-curl-7.61.1-dev /home/matto/projects/haskell/store-graph/test/store/jyqc2inhrx1k6gc2nlvwfji8rgp4dncz-openssl-1.0.2p-dev /home/matto/projects/haskell/store-graph/test/store/ghhgz63ds46cinxflc24r534x3x9hg0a-zlib-1.2.11-dev /home/matto/projects/haskell/store-graph/test/store/ivynxk12qirqsf6m4xcp0wf5dwgj7ifg-expat-2.2.6-dev /home/matto/projects/haskell/store-graph/test/store/62hpfmpj2sm8z1din9js72743g3lzhz0-cpio-2.12 /home/matto/projects/haskell/store-graph/test/store/6qlxp3x19c4y3rqcjn0gqi2acdgjmmmi-hook /home/matto/projects/haskell/store-graph/test/store/l48lx87q6hnd6h7rahjnx42pqwqf39sf-glibc-iconv-2.27 /home/matto/projects/haskell/store-graph/test/store/h0nlvhnjp41s5ji2viz19rq1ghc0bx2b-perl-5.28.0"),("builder","/home/matto/projects/haskell/store-graph/test/store/x9ql37gvvykqzxxsfgk1kqhm455p26b1-bash-4.4-p23/bin/bash"),("configureFlags",""),("depsBuildBuild",""),("depsBuildBuildPropagated",""),("depsBuildTarget",""),("depsBuildTargetPropagated",""),("depsHostHost",""),("depsHostHostPropagated",""),("depsTargetTarget",""),("depsTargetTargetPropagated",""),("doCheck",""),("doInstallCheck","1"),("enableParallelBuilding","1"),("enableParallelChecking","1"),("gitweb","/home/matto/projects/haskell/store-graph/test/store/pm2a6wfaqm73qv5s9g46i45v2824rw15-git-2.19.1-gitweb"),("hardeningDisable","format"),("installCheckFlags","DEFAULT_TEST_TARGET=prove"),("installCheckTarget","test"),("installFlags","NO_INSTALL_HARDLINKS=1"),("makeFlags","prefix=${out} SHELL_PATH=/home/matto/projects/haskell/store-graph/test/store/x9ql37gvvykqzxxsfgk1kqhm455p26b1-bash-4.4-p23/bin/bash PERL_PATH=/home/matto/projects/haskell/store-graph/test/store/h0nlvhnjp41s5ji2viz19rq1ghc0bx2b-perl-5.28.0/bin/perl NO_PYTHON=1 sysconfdir=/etc/"),("name","git-2.19.1"),("nativeBuildInputs","/home/matto/projects/haskell/store-graph/test/store/3lc1viwddn6sczpz72ijqzxw887c2psx-gettext-0.19.8.1 /home/matto/projects/haskell/store-graph/test/store/h0nlvhnjp41s5ji2viz19rq1ghc0bx2b-perl-5.28.0"),("out","/home/matto/projects/haskell/store-graph/test/store/pkwkbwa7vqkck2lxjh74mkrd0jhlcpn1-git-2.19.1"),("outputs","out gitweb"),("patches","/home/matto/projects/haskell/store-graph/test/store/lj0awfz89djbfhqm4byjw8ilfwcm7399-docbook2texi.patch /home/matto/projects/haskell/store-graph/test/store/sm3dzz4wcsqm47k2qkl68bijmc6djf7h-git-sh-i18n.patch /home/matto/projects/haskell/store-graph/test/store/dwzh5nhf20ywxrs315md7rxr0in4hpqy-ssh-path.patch /home/matto/projects/haskell/store-graph/test/store/ysl9wj7paap3zxg6c42alb6191gqwl4k-git-send-email-honor-PATH.patch /home/matto/projects/haskell/store-graph/test/store/afvl60vdbmagbj99lffif159gwbs157n-installCheck-path.patch"),("postBuild","make -C contrib/subtree\n"),("postInstall","notSupported() {\n  unlink $1 || true\n}\n\n# Install git-subtree.\nmake -C contrib/subtree install \nrm -rf contrib/subtree\n\n# Install contrib stuff.\nmkdir -p $out/share/git\ncp -a contrib $out/share/git/\nln -s \"$out/share/git/contrib/credential/netrc/git-credential-netrc\" $out/bin/\nmkdir -p $out/share/emacs/site-lisp\nln -s \"$out/share/git/contrib/emacs/\"*.el $out/share/emacs/site-lisp/\nmkdir -p $out/etc/bash_completion.d\nln -s $out/share/git/contrib/completion/git-completion.bash $out/etc/bash_completion.d/\nln -s $out/share/git/contrib/completion/git-prompt.sh $out/etc/bash_completion.d/\n\n# grep is a runtime dependency, need to patch so that it's found\nsubstituteInPlace $out/libexec/git-core/git-sh-setup \\\n    --replace ' grep' ' /home/matto/projects/haskell/store-graph/test/store/p72rkwc2zlnr7h1l9pdlbcv645yx8z22-gnugrep-3.1/bin/grep' \\\n    --replace ' egrep' ' /home/matto/projects/haskell/store-graph/test/store/p72rkwc2zlnr7h1l9pdlbcv645yx8z22-gnugrep-3.1/bin/egrep'\n\n# Fix references to the perl, sed, awk and various coreutil binaries used by\n# shell scripts that git calls (e.g. filter-branch)\nSCRIPT=\"$(cat <<'EOS'\n  BEGIN{\n    @a=(\n      '/home/matto/projects/haskell/store-graph/test/store/p72rkwc2zlnr7h1l9pdlbcv645yx8z22-gnugrep-3.1/bin/grep', '/home/matto/projects/haskell/store-graph/test/store/b651bxcnxxkhxgagwbf9733k95n6cmv1-gnused-4.5/bin/sed', '/home/matto/projects/haskell/store-graph/test/store/iz6bkff6zglcg8xrcbq05af9p9irxjw4-gawk-4.2.1/bin/awk',\n      '/home/matto/projects/haskell/store-graph/test/store/4yzzvr0jc14a60rdgpa8dqhsl9x0wpll-coreutils-8.30/bin/cut', '/home/matto/projects/haskell/store-graph/test/store/4yzzvr0jc14a60rdgpa8dqhsl9x0wpll-coreutils-8.30/bin/basename', '/home/matto/projects/haskell/store-graph/test/store/4yzzvr0jc14a60rdgpa8dqhsl9x0wpll-coreutils-8.30/bin/dirname',\n      '/home/matto/projects/haskell/store-graph/test/store/4yzzvr0jc14a60rdgpa8dqhsl9x0wpll-coreutils-8.30/bin/wc', '/home/matto/projects/haskell/store-graph/test/store/4yzzvr0jc14a60rdgpa8dqhsl9x0wpll-coreutils-8.30/bin/tr'\n      , '/home/matto/projects/haskell/store-graph/test/store/h0nlvhnjp41s5ji2viz19rq1ghc0bx2b-perl-5.28.0/bin/perl'\n    );\n  }\n  foreach $c (@a) {\n    $n=(split(\"/\", $c))[-1];\n    s|(?<=[^#][^/.-])\\b${n}(?=\\s)|${c}|g\n  }\nEOS\n)\"\nperl -0777 -i -pe \"$SCRIPT\" \\\n  $out/libexec/git-core/git-{sh-setup,filter-branch,merge-octopus,mergetool,quiltimport,request-pull,stash,submodule,subtree,web--browse}\n\n\n# Also put git-http-backend into $PATH, so that we can use smart\n# HTTP(s) transports for pushing\nln -s $out/libexec/git-core/git-http-backend $out/bin/git-http-backend\n# put in separate package for simpler maintenance\nmv $out/share/gitweb $gitweb/\n\n# wrap perl commands\ngitperllib=$out/lib/perl5/site_perl\nfor i in /home/matto/projects/haskell/store-graph/test/store/0svibfd4sk3prgdh9pfnwyc6ar6qgbfj-perl5.28.0-libwww-perl-6.35 /home/matto/projects/haskell/store-graph/test/store/a2s69923j4gnicqnh98xjihshi92a9x4-perl5.28.0-URI-1.74 /home/matto/projects/haskell/store-graph/test/store/b4mmgqw7s3hhglwmlgdqpfvg7kb93zc3-perl5.28.0-TermReadKey-2.37; do\n  gitperllib=$gitperllib:$i/lib/perl5/site_perl\ndone\nwrapProgram $out/libexec/git-core/git-cvsimport \\\n            --set GITPERLLIB \"$gitperllib\"\nwrapProgram $out/libexec/git-core/git-add--interactive \\\n            --set GITPERLLIB \"$gitperllib\"\nwrapProgram $out/libexec/git-core/git-archimport \\\n            --set GITPERLLIB \"$gitperllib\"\nwrapProgram $out/libexec/git-core/git-instaweb \\\n            --set GITPERLLIB \"$gitperllib\"\nwrapProgram $out/libexec/git-core/git-cvsexportcommit \\\n            --set GITPERLLIB \"$gitperllib\"\n# replace git-svn by notification script\n       notSupported $out/libexec/git-core/git-svn\n# replace git-send-email by notification script\n       notSupported $out/libexec/git-core/git-send-email\n# Don't wrap Tcl/Tk, replace them by notification scripts\nfor prog in bin/gitk libexec/git-core/git-gui; do\n  notSupported \"$out/$prog\"\ndone\n"),("postPatch","for x in connect.c git-gui/lib/remote_add.tcl ; do\n  substituteInPlace \"$x\" \\\n    --subst-var-by ssh \"/home/matto/projects/haskell/store-graph/test/store/4hhgrip1c1pnbysbjy71q37v8q6zyah5-openssh-7.9p1/bin/ssh\"\ndone\n\n# Fix references to gettext introduced by ./git-sh-i18n.patch\nsubstituteInPlace git-sh-i18n.sh \\\n    --subst-var-by gettext /home/matto/projects/haskell/store-graph/test/store/3lc1viwddn6sczpz72ijqzxw887c2psx-gettext-0.19.8.1\n"),("preBuild","makeFlagsArray+=( perllibdir=$out/$(perl -MConfig -wle 'print substr $Config{installsitelib}, 1 + length $Config{siteprefixexp}') )\n"),("preInstall",""),("preInstallCheck","installCheckFlagsArray+=(\n  GIT_PROVE_OPTS=\"--jobs $NIX_BUILD_CORES --failures --state=failed,save\"\n  GIT_TEST_INSTALLED=$out/bin\n  NO_SVN_TESTS=y\n)\n\nfunction disable_test {\n  local test=$1 pattern=$2\n  if [ $# -eq 1 ]; then\n    mv t/{,skip-}$test.sh || true\n  else\n    sed -i t/$test.sh \\\n      -e \"/^ *test_expect_.*$pattern/,/^ *' *\\$/{s/^/#/}\"\n  fi\n}\n\n# Shared permissions are forbidden in sandbox builds.\ndisable_test t0001-init shared\ndisable_test t1301-shared-repo\n\n# Our patched gettext never fallbacks\ndisable_test t0201-gettext-fallbacks\n\n# Disable sendmail tests\ndisable_test t9001-send-email\n\n\n# XXX: I failed to understand why this one fails.\n# Could someone try to re-enable it on the next release ?\n# Tested to fail: 2.18.0 and 2.19.0\ndisable_test t1700-split-index \"null sha1\"\n\n# Tested to fail: 2.18.0\ndisable_test t7005-editor \"editor with a space\"\ndisable_test t7005-editor \"core.editor with a space\"\n\n# Tested to fail: 2.18.0\ndisable_test t9902-completion \"sourcing the completion script clears cached --options\"\n\n# As of 2.19.0, t5562 refers to #!/usr/bin/perl\npatchShebangs t/t5562/invoke-with-content-length.pl\n"),("propagatedBuildInputs",""),("propagatedNativeBuildInputs",""),("src","/home/matto/projects/haskell/store-graph/test/store/kfrssbp7n7h069m451ms1z3gbd0qjx7j-git-2.19.1.tar.xz"),("stdenv","/home/matto/projects/haskell/store-graph/test/store/xfipsdm1l52xwm80k0si7yvj7g2qqxfl-stdenv-linux"),("strictDeps",""),("stripDebugList","lib libexec bin share/git/contrib/credential/libsecret"),("system","x86_64-linux")])